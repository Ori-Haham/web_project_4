!function(){"use strict";var e={874:function(e,t,r){e.exports=r.p+"3220aa0123cd7dc3fc11.jpg"},937:function(e,t,r){e.exports=r.p+"c75819857ff1599f0c50.svg"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.p="",function(){class e{constructor(e){let{baseUrl:t,authorizationCode:r}=e;this._baseUrl=t,this._authorization=r}returnJson(){return fetch(this._baseUrl,{headers:{authorization:this._authorization}}).then((e=>e.json()))}updateUserData(e,t){return fetch(this._baseUrl,{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})}postCard(e,t){return fetch(this._baseUrl,{method:"POST",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})}}var t=r(937);r(874);const n={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},o=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__add-button"),i=document.querySelector(".profile__name"),a=document.querySelector(".profile__about-me"),l=(document.querySelector(".profile__image"),document.querySelector(".profile-popup")),u=(l.querySelector(".profile-popup__close-button"),document.querySelector(".card-popup")),c=(u.querySelector(".card-popup__close-button"),document.querySelector(".profile-form")),h=c.querySelector(".profile-form__name"),d=c.querySelector(".profile-form__about-me"),_=(c.querySelector(".profile-form__submit-button"),document.querySelector(".card-form")),p=_.querySelector(".card-form__place"),m=_.querySelector(".card-form__url"),b=document.querySelector(".cards"),f=document.querySelector(".image-popup"),v=(f.querySelector(".image-popup__close-button"),f.querySelector(".image-popup__image")),E=f.querySelector(".image-popup__location"),S={name:i.textContent,about:a.textContent};class y{constructor(e,t,r){let{handleCardClick:n}=r;var o,s;s=()=>{this._element.remove(),this._element=null},(o="_hendelDelete")in this?Object.defineProperty(this,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[o]=s,this._name=e.name,this._link=e.link,this._likes=e.likes,this._cardSelector=t,this._handleCardClick=n}t(){return{name:this._name}}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._handleCardClickListener(),this._handleDeleteButton(),this._handleCardLikeButton()}_handleCardClickListener(){this._element.querySelector(".card__image").addEventListener("click",(e=>{this._handleCardClick(e)}))}_handleDeleteButton(){this._element.querySelector(".card__remove-button").addEventListener("click",this._hendelDelete)}_handleCardLikeButton(){this._element.querySelector(".card__like-button").addEventListener("click",(function(e){e.target.classList.toggle("card__like-button_active")}))}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._element.querySelector(".card__location").textContent=this._name,this._likesCounte=this._element.querySelector(".card__likeCounte"),this._likesCounte.textContent=this._likes.length,this._element}}class C{constructor(e,t){var r,n;n=()=>{this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState(this._inputList,this._buttonElement)},(r="resetValidation")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,this._formSelector=e,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}_showInputError(e,t){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this._inputErrorClass),this._errorElement.textContent=t,this._errorElement.classList.add(this._errorClass)}_hideInputError(e){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList,this._buttonElement)}))}))}enableValidation(){this._formElement=document.querySelector(this._formSelector),this._setEventListeners()}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class L{constructor(e){g(this,"_handleEscClose",(e=>{"Escape"===e.key&&this._popup.classList.add("popup-hidden")})),g(this,"_handleMouseDown",(e=>{const t=this._popup.querySelector(".popup__close-button");(e.target===t||e.target.classList.contains("popup"))&&this.close()})),this._popup=e}open(){this._popup.classList.remove("popup-hidden"),this.setEventListeners()}close(){this._popup.classList.add("popup-hidden"),this.removeEventListeners()}setEventListeners(){window.addEventListener("keydown",this._handleEscClose),this._popup.addEventListener("mousedown",this._handleMouseDown)}removeEventListeners(){window.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("mousedown",this._handleMouseDown)}}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class w extends L{constructor(e,t,r){let{handleFormSubmit:n}=r;super(e),q(this,"close",(()=>{super.close(),this._form.reset(),this.removeEventListeners()})),q(this,"setEventListeners",(()=>{super.setEventListeners(),this._form.addEventListener("submit",this._handleSubmit)})),q(this,"removeEventListeners",(()=>{super.removeEventListeners(),this._form.removeEventListener("submit",this._handleSubmit)})),q(this,"_handleSubmit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),this._form=document.querySelector(t),this._handleFormSubmit=n}_getInputValues(){const e=[...this._popup.querySelectorAll(".popup__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}}const k=new e({baseUrl:"https://around.nomoreparties.co/v1/group-12/cards",authorizationCode:"37c0271e-6c35-4cdb-bfdd-3d6b737f9411"}),I=new e({baseUrl:"https://around.nomoreparties.co/v1/group-12/users/me",authorizationCode:"37c0271e-6c35-4cdb-bfdd-3d6b737f9411"}),U=new e({baseUrl:"https://around.nomoreparties.co/v1/group-12/users/me",authorizationCode:"37c0271e-6c35-4cdb-bfdd-3d6b737f9411"}),x=new e({baseUrl:"https://around.nomoreparties.co/v1/group-12/cards",authorizationCode:"37c0271e-6c35-4cdb-bfdd-3d6b737f9411"});function B(){I.returnJson().then((e=>{var t,r;t=e.name,r=e.about,i.textContent=t,a.textContent=r}))}const z=new class{constructor(e){let{data:t}=e;this._nameElement=t.name,this._aboutMeElement=t.about}getUserInfo(){const e={};return e.name=this._nameElement,e.about=this._aboutMeElement,e}setUserInfo(e,t){this._nameElement=e,this._aboutMeElement=t}}({data:S});I.returnJson().then((e=>{z.setUserInfo(e.name,e.about)}));const j=new class extends L{constructor(e,t,r){var n,o;super(e),o=e=>{let{src:t,alt:r}=e;super.open(),this._popupImage.src=t,this._popupImage.alt=r,this._popupLocation.textContent=r},(n="open")in this?Object.defineProperty(this,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):this.open=o,this._popupImage=t,this._popupLocation=r}}(f,v,E),D=new C(".profile-form",n),V=new C(".card-form",n),O=new w(l,".profile-form",{handleFormSubmit:()=>{z.setUserInfo(h.value,d.value),U.updateUserData(z.getUserInfo().name,z.getUserInfo().about).then((()=>{B()})),O.close()}}),P=new class{constructor(e,t){let{data:r,renderer:n}=e;this._data=r,this._container=t,this._renderer=n}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:async function(e){console.log(await e);const t=new y(await e,"#card-template",{handleCardClick:e=>{j.open({src:e.target.src,alt:e.target.alt})}}).generateCard();P.addItem(t)}},b);k.returnJson().then((e=>{P.renderItems(e)}));const M=new w(u,".card-form",{handleFormSubmit:()=>{x.postCard(p.value,m.value).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>(console.log(e),e))).then((e=>{P.renderItems([e])})).then((()=>{M.close()}))}});B(),o.addEventListener("click",(function(){!function(){const e=z.getUserInfo();h.value=e.name,d.value=e.about}(),D.resetValidation(),O.open()})),s.addEventListener("click",(function(){V.resetValidation(),M.open()})),D.enableValidation(),V.enableValidation(),document.getElementById("logo").src=t}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUEwQkosR0FDeEJLLFFBQVFDLFVBQVVOLEdBQ2xCLE1BS01PLEVBTE8sSUFBSXhILFFBQVdpSCxFQUFNLGlCQUFrQixDQUNsRDlHLGdCQUFrQmtCLElBQ2hCOEUsRUFBVzlCLEtBQUssQ0FBRXpDLElBQUtQLEVBQUlFLE9BQU9LLElBQUtDLElBQUtSLEVBQUlFLE9BQU9NLFNBR2xDSCxlQUN6QmdGLEVBQVNRLFFBQVFNLEtBT2pCOUgsR0FHRitGLEVBQWdCcEksYUFBYUksTUFBTUMsSUFDakNnSixFQUFTTSxZQUFZdEosTUFHdkIsTUFBTStKLEVBQWlCLElBQUk3QyxFQUFjekYsRUFBVyxhQUFjLENBQ2hFMkYsaUJBQWtCLEtBQ2hCYyxFQUNHekgsU0FBU3FCLEVBQVdnRyxNQUFPL0YsRUFBUytGLE9BQ3BDL0gsTUFBTWlLLEdBQ0RBLEVBQUtDLEdBQ0FELEVBQUsvSixPQUVQaUssUUFBUUMsT0FBUixpQkFBeUJILEVBQUtJLFdBRXRDckssTUFBTWlLLElBQ0xKLFFBQVFDLElBQUlHLEdBQ0xBLEtBRVJqSyxNQUFNaUssSUFDTGhCLEVBQVNNLFlBQVksQ0FBQ1UsT0FFdkJqSyxNQUFLLEtBQ0pnSyxFQUFlckQsY0FzQnZCeUIsSUFFQWpILEVBQXVCd0MsaUJBQWlCLFNBYnhDLFlBTkEsV0FDRSxNQUFNMkcsRUFBV2pDLEVBQVNHLGNBQzFCNUcsRUFBVW1HLE1BQVF1QyxFQUFTbEssS0FDM0J5QixFQUFXa0csTUFBUXVDLEVBQVNqSyxNQUk1QmtLLEdBQ0F6QixFQUFxQjBCLGtCQUNyQnhCLEVBQWtCcEMsVUFZcEJ0RixFQUFvQnFDLGlCQUFpQixTQVRyQyxXQUNFb0YsRUFBa0J5QixrQkFDbEJSLEVBQWVwRCxVQVNqQmtDLEVBQXFCMUMsbUJBRXJCMkMsRUFBa0IzQyxtQkFFQWhGLFNBQVNxSixlQUFlLFFBQ2hDdEcsSUFBTXVHLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9mb3JtVmFsaWRhdGlvbk9iamVjdC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtIC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGF1dGhvcml6YXRpb25Db2RlIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5fYXV0aG9yaXphdGlvbiA9IGF1dGhvcml6YXRpb25Db2RlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuSnNvbigpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsLCB7XHJcbiAgICAgIGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbiB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VyRGF0YShuYW1lLCBhYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwb3N0Q2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0aW9uT2JqZWN0ID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG4iLCJjb25zdCBwcm9maWxlUG9wdXBPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgY2FyZFBvcHVwT3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Fib3V0LW1lXCIpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLXBvcHVwXCIpO1xyXG5jb25zdCBwcm9maWxlUG9wdXBDbG9zZUJ1dHRvbiA9IHByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGUtcG9wdXBfX2Nsb3NlLWJ1dHRvblwiXHJcbik7XHJcblxyXG5jb25zdCBjYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtcG9wdXBcIik7XHJcbmNvbnN0IGNhcmRQb3B1cENsb3NlQnV0dG9uID0gY2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuY2FyZC1wb3B1cF9fY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLWZvcm1cIik7XHJcbmNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZS1mb3JtX19uYW1lXCIpO1xyXG5jb25zdCBhYm91dElucHV0ID0gcHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLWZvcm1fX2Fib3V0LW1lXCIpO1xyXG5jb25zdCBzdWJtaXRQcm9maWxlQnV0dG9uID0gcHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlLWZvcm1fX3N1Ym1pdC1idXR0b25cIlxyXG4pO1xyXG5cclxuY29uc3QgY2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtZm9ybVwiKTtcclxuY29uc3QgcGFsY2VJbnB1dCA9IGNhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZC1mb3JtX19wbGFjZVwiKTtcclxuY29uc3QgdXJsSW5wdXQgPSBjYXJkRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtZm9ybV9fdXJsXCIpO1xyXG5cclxuY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpO1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtcG9wdXBcIik7XHJcbmNvbnN0IGltYWdlUG9wdXBDbG9zZUJ1dHRvbiA9IGltYWdlUG9wdXAucXVlcnlTZWxlY3RvcihcclxuICBcIi5pbWFnZS1wb3B1cF9fY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuY29uc3QgaW1hZ2VQb3B1cEltYWdlID0gaW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLXBvcHVwX19pbWFnZVwiKTtcclxuY29uc3QgaW1hZ2VQb3B1cExvY2F0aW9uID0gaW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLXBvcHVwX19sb2NhdGlvblwiKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvT2JqZWN0ID0ge1xyXG4gIG5hbWU6IHByb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gIGFib3V0OiBwcm9maWxlQWJvdXQudGV4dENvbnRlbnQsXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIHByb2ZpbGVQb3B1cE9wZW5CdXR0b24sXHJcbiAgY2FyZFBvcHVwT3BlbkJ1dHRvbixcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlQWJvdXQsXHJcbiAgcHJvZmlsZUltYWdlLFxyXG4gIHByb2ZpbGVQb3B1cCxcclxuICBwcm9maWxlUG9wdXBDbG9zZUJ1dHRvbixcclxuICBjYXJkUG9wdXAsXHJcbiAgY2FyZFBvcHVwQ2xvc2VCdXR0b24sXHJcbiAgcHJvZmlsZUZvcm0sXHJcbiAgbmFtZUlucHV0LFxyXG4gIGFib3V0SW5wdXQsXHJcbiAgc3VibWl0UHJvZmlsZUJ1dHRvbixcclxuICBjYXJkRm9ybSxcclxuICBwYWxjZUlucHV0LFxyXG4gIHVybElucHV0LFxyXG4gIGNhcmRzQ29udGFpbmVyLFxyXG4gIGltYWdlUG9wdXAsXHJcbiAgaW1hZ2VQb3B1cENsb3NlQnV0dG9uLFxyXG4gIGltYWdlUG9wdXBJbWFnZSxcclxuICBpbWFnZVBvcHVwTG9jYXRpb24sXHJcbiAgdXNlckluZm9PYmplY3QsXHJcbn07XHJcbiIsImltcG9ydCB7IG5hbWVJbnB1dCwgcHJvZmlsZU5hbWUgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5jbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIHsgaGFuZGxlQ2FyZENsaWNrIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuXHJcbiAgdCgpIHtcclxuICAgIGNvbnN0IHQgPSB7IG5hbWU6IHRoaXMuX25hbWUgfTtcclxuICAgIHJldHVybiB0O1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9oZW5kZWxEZWxldGUgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrTGlzdGVuZXIoKTtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKTtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZUJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNhcmRDbGlja0xpc3RlbmVyKCkge1xyXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayhldnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQnV0dG9uKCkge1xyXG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3JlbW92ZS1idXR0b25cIik7XHJcbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hlbmRlbERlbGV0ZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ2FyZExpa2VCdXR0b24oKSB7XHJcbiAgICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuXHJcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIGltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19sb2NhdGlvblwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fbGlrZXNDb3VudGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZUNvdW50ZVwiKTtcclxuICAgIHRoaXMuX2xpa2VzQ291bnRlLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQ2FyZCB9O1xyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtU2VsZWN0b3IsIHZhbGlkYXRpb25PYmplY3QpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uT2JqZWN0LmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25PYmplY3Quc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gdmFsaWRhdGlvbk9iamVjdC5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvbk9iamVjdC5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvbk9iamVjdC5lcnJvckNsYXNzO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCB7IEZvcm1WYWxpZGF0b3IgfTtcclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwLWhpZGRlblwiKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwLWhpZGRlblwiKTtcclxuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlTW91c2VEb3duKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlTW91c2VEb3duKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cC1oaWRkZW5cIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZU1vdXNlRG93biA9IChldnQpID0+IHtcclxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xyXG4gICAgaWYgKGV2dC50YXJnZXQgPT09IGNsb3NlQnV0dG9uIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBmb3JtLCB7IGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gWy4uLnRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpXTtcclxuXHJcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcblxyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBjbG9zZSA9ICgpID0+IHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfTtcclxuXHJcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICBzdXBlci5yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZVN1Ym1pdCA9IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmltcG9ydCBsb2dvU3JjIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcclxuaW1wb3J0IHByb2ZpbGVTcmMgZnJvbSBcIi4uL2ltYWdlcy9mcm9maWxlLWltYWdlLmpwZ1wiO1xyXG5pbXBvcnQgeyBmb3JtVmFsaWRhdGlvbk9iamVjdCB9IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL2Zvcm1WYWxpZGF0aW9uT2JqZWN0LmpzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtIFwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5pbXBvcnQge1xyXG4gIHByb2ZpbGVQb3B1cE9wZW5CdXR0b24sXHJcbiAgY2FyZFBvcHVwT3BlbkJ1dHRvbixcclxuICBwcm9maWxlUG9wdXAsXHJcbiAgY2FyZFBvcHVwLFxyXG4gIG5hbWVJbnB1dCxcclxuICBhYm91dElucHV0LFxyXG4gIGNhcmRzQ29udGFpbmVyLFxyXG4gIGltYWdlUG9wdXAsXHJcbiAgdXNlckluZm9PYmplY3QsXHJcbiAgaW1hZ2VQb3B1cEltYWdlLFxyXG4gIGltYWdlUG9wdXBMb2NhdGlvbixcclxuICBwYWxjZUlucHV0LFxyXG4gIHVybElucHV0LFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVBYm91dCxcclxufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHNcIjtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkZEFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkc1wiLFxyXG4gIGF1dGhvcml6YXRpb25Db2RlOiBcIjM3YzAyNzFlLTZjMzUtNGNkYi1iZmRkLTNkNmI3MzdmOTQxMVwiLFxyXG59KTtcclxuXHJcbmNvbnN0IGdldFVzZXJJbmZvQXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL3VzZXJzL21lXCIsXHJcbiAgYXV0aG9yaXphdGlvbkNvZGU6IFwiMzdjMDI3MWUtNmMzNS00Y2RiLWJmZGQtM2Q2YjczN2Y5NDExXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgdXBkYXRlVXNlckluZm9BcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvdXNlcnMvbWVcIixcclxuICBhdXRob3JpemF0aW9uQ29kZTogXCIzN2MwMjcxZS02YzM1LTRjZGItYmZkZC0zZDZiNzM3Zjk0MTFcIixcclxufSk7XHJcblxyXG5jb25zdCBwb3N0Q2FyZEFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkc1wiLFxyXG4gIGF1dGhvcml6YXRpb25Db2RlOiBcIjM3YzAyNzFlLTZjMzUtNGNkYi1iZmRkLTNkNmI3MzdmOTQxMVwiLFxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHNldFByb2ZpbGVJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gIHByb2ZpbGVBYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kZWxVc2VySW5mbygpIHtcclxuICBnZXRVc2VySW5mb0FwaS5yZXR1cm5Kc29uKCkudGhlbigocmVzKSA9PiB7XHJcbiAgICBzZXRQcm9maWxlSW5mbyhyZXMubmFtZSwgcmVzLmFib3V0KTtcclxuICB9KTtcclxufVxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oeyBkYXRhOiB1c2VySW5mb09iamVjdCB9KTtcclxuXHJcbmdldFVzZXJJbmZvQXBpLnJldHVybkpzb24oKS50aGVuKChyZXMpID0+IHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMubmFtZSwgcmVzLmFib3V0KTtcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFxyXG4gIGltYWdlUG9wdXAsXHJcbiAgaW1hZ2VQb3B1cEltYWdlLFxyXG4gIGltYWdlUG9wdXBMb2NhdGlvblxyXG4pO1xyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBcIi5wcm9maWxlLWZvcm1cIixcclxuICBmb3JtVmFsaWRhdGlvbk9iamVjdFxyXG4pO1xyXG5cclxuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcIi5jYXJkLWZvcm1cIiwgZm9ybVZhbGlkYXRpb25PYmplY3QpO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwQ2xhc3MgPSBuZXcgUG9wdXBXaXRoRm9ybShwcm9maWxlUG9wdXAsIFwiLnByb2ZpbGUtZm9ybVwiLCB7XHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8obmFtZUlucHV0LnZhbHVlLCBhYm91dElucHV0LnZhbHVlKTtcclxuICAgIHVwZGF0ZVVzZXJJbmZvQXBpXHJcbiAgICAgIC51cGRhdGVVc2VyRGF0YSh1c2VySW5mby5nZXRVc2VySW5mbygpLm5hbWUsIHVzZXJJbmZvLmdldFVzZXJJbmZvKCkuYWJvdXQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBoYW5kZWxVc2VySW5mbygpO1xyXG4gICAgICB9KTtcclxuICAgIHByb2ZpbGVQb3B1cENsYXNzLmNsb3NlKCk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0pIHtcclxuICBjb25zb2xlLmxvZyhhd2FpdCBpdGVtKTtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoYXdhaXQgaXRlbSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCB7XHJcbiAgICBoYW5kbGVDYXJkQ2xpY2s6IChldnQpID0+IHtcclxuICAgICAgcG9wdXBJbWFnZS5vcGVuKHsgc3JjOiBldnQudGFyZ2V0LnNyYywgYWx0OiBldnQudGFyZ2V0LmFsdCB9KTtcclxuICAgIH0sXHJcbiAgfSk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG59XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxyXG4gIH0sXHJcbiAgY2FyZHNDb250YWluZXJcclxuKTtcclxuXHJcbmluaXRpYWxDYXJkZEFwaS5yZXR1cm5Kc29uKCkudGhlbigocmVzKSA9PiB7XHJcbiAgY2FyZExpc3QucmVuZGVySXRlbXMocmVzKTtcclxufSk7XHJcblxyXG5jb25zdCBjYXJkUG9wdXBDbGFzcyA9IG5ldyBQb3B1cFdpdGhGb3JtKGNhcmRQb3B1cCwgXCIuY2FyZC1mb3JtXCIsIHtcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoKSA9PiB7XHJcbiAgICBwb3N0Q2FyZEFwaVxyXG4gICAgICAucG9zdENhcmQocGFsY2VJbnB1dC52YWx1ZSwgdXJsSW5wdXQudmFsdWUpXHJcbiAgICAgIC50aGVuKChjYXJkKSA9PiB7XHJcbiAgICAgICAgaWYgKGNhcmQub2spIHtcclxuICAgICAgICAgIHJldHVybiBjYXJkLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtjYXJkLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGNhcmQpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhjYXJkKTtcclxuICAgICAgICByZXR1cm4gY2FyZDtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGNhcmQpID0+IHtcclxuICAgICAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhbY2FyZF0pO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZFBvcHVwQ2xhc3MuY2xvc2UoKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgYWJvdXRJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmFib3V0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuUHJvZmlsZUZvcm0oKSB7XHJcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcHJvZmlsZVBvcHVwQ2xhc3Mub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuQ2FyZFBvcHVwKCkge1xyXG4gIGNhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNhcmRQb3B1cENsYXNzLm9wZW4oKTtcclxufVxyXG5cclxuaGFuZGVsVXNlckluZm8oKTtcclxuXHJcbnByb2ZpbGVQb3B1cE9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlRm9ybSk7XHJcblxyXG5jYXJkUG9wdXBPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuQ2FyZFBvcHVwKTtcclxuXHJcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGxvZ29JbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9nb1wiKTtcclxubG9nb0ltYWdlLnNyYyA9IGxvZ29TcmM7XHJcblxyXG4vKmNvbnN0IGlucHV0TGlzdCA9IFsuLi5jYXJkUG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIildO1xyXG5cclxuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG5cclxuICAgICAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7Ki9cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2Fib3V0TWVFbGVtZW50ID0gZGF0YS5hYm91dDtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckluZm8gPSB7fTtcclxuXHJcbiAgICB1c2VySW5mby5uYW1lID0gdGhpcy5fbmFtZUVsZW1lbnQ7XHJcbiAgICB1c2VySW5mby5hYm91dCA9IHRoaXMuX2Fib3V0TWVFbGVtZW50O1xyXG5cclxuICAgIHJldHVybiB1c2VySW5mbztcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9hYm91dE1lRWxlbWVudCA9IGFib3V0O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBwb3B1cEltYWdlLCBwb3B1cExvY2F0aW9uKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSBwb3B1cEltYWdlO1xyXG4gICAgdGhpcy5fcG9wdXBMb2NhdGlvbiA9IHBvcHVwTG9jYXRpb247XHJcbiAgfVxyXG4gIG9wZW4gPSAoeyBzcmMsIGFsdCB9KSA9PiB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IHNyYztcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gYWx0O1xyXG4gICAgdGhpcy5fcG9wdXBMb2NhdGlvbi50ZXh0Q29udGVudCA9IGFsdDtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoZGF0YSkge1xyXG4gICAgZGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwiQXBpIiwiY29uc3RydWN0b3IiLCJiYXNlVXJsIiwiYXV0aG9yaXphdGlvbkNvZGUiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfYXV0aG9yaXphdGlvbiIsInJldHVybkpzb24iLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsImpzb24iLCJ1cGRhdGVVc2VyRGF0YSIsIm5hbWUiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicG9zdENhcmQiLCJsaW5rIiwiZm9ybVZhbGlkYXRpb25PYmplY3QiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVQb3B1cE9wZW5CdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjYXJkUG9wdXBPcGVuQnV0dG9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlQWJvdXQiLCJwcm9maWxlUG9wdXAiLCJjYXJkUG9wdXAiLCJwcm9maWxlRm9ybSIsIm5hbWVJbnB1dCIsImFib3V0SW5wdXQiLCJjYXJkRm9ybSIsInBhbGNlSW5wdXQiLCJ1cmxJbnB1dCIsImNhcmRzQ29udGFpbmVyIiwiaW1hZ2VQb3B1cCIsImltYWdlUG9wdXBJbWFnZSIsImltYWdlUG9wdXBMb2NhdGlvbiIsInVzZXJJbmZvT2JqZWN0IiwidGV4dENvbnRlbnQiLCJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIl9lbGVtZW50IiwicmVtb3ZlIiwiX25hbWUiLCJfbGluayIsIl9saWtlcyIsImxpa2VzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJ0IiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9oYW5kbGVDYXJkQ2xpY2tMaXN0ZW5lciIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfaGFuZGxlQ2FyZExpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiX2hlbmRlbERlbGV0ZSIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdlbmVyYXRlQ2FyZCIsImltYWdlRWxlbWVudCIsInNyYyIsImFsdCIsIl9saWtlc0NvdW50ZSIsImxlbmd0aCIsIkZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0aW9uT2JqZWN0IiwiX2lucHV0TGlzdCIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfYnV0dG9uRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwiX2Vycm9yRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsImlkIiwiYWRkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExpc3QiLCJzb21lIiwiZGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsIl9wb3B1cCIsImNsb3NlQnV0dG9uIiwiY29udGFpbnMiLCJjbG9zZSIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwid2luZG93IiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2hhbmRsZU1vdXNlRG93biIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9mb3JtIiwicmVzZXQiLCJfaGFuZGxlU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiaW5pdGlhbENhcmRkQXBpIiwiZ2V0VXNlckluZm9BcGkiLCJ1cGRhdGVVc2VySW5mb0FwaSIsInBvc3RDYXJkQXBpIiwiaGFuZGVsVXNlckluZm8iLCJ1c2VySW5mbyIsIl9uYW1lRWxlbWVudCIsIl9hYm91dE1lRWxlbWVudCIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwb3B1cEltYWdlIiwicG9wdXBMb2NhdGlvbiIsIl9wb3B1cEltYWdlIiwiX3BvcHVwTG9jYXRpb24iLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImNhcmRGb3JtVmFsaWRhdG9yIiwicHJvZmlsZVBvcHVwQ2xhc3MiLCJjYXJkTGlzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfZGF0YSIsIl9jb250YWluZXIiLCJfcmVuZGVyZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJhc3luYyIsImNvbnNvbGUiLCJsb2ciLCJjYXJkRWxlbWVudCIsImNhcmRQb3B1cENsYXNzIiwiY2FyZCIsIm9rIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInVzZXJEYXRhIiwiZmlsbFByb2ZpbGVGb3JtIiwicmVzZXRWYWxpZGF0aW9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJsb2dvU3JjIl0sInNvdXJjZVJvb3QiOiIifQ==