!function(){"use strict";var e={874:function(e,t,r){e.exports=r.p+"3220aa0123cd7dc3fc11.jpg"},937:function(e,t,r){e.exports=r.p+"c75819857ff1599f0c50.svg"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.p="",function(){class e{constructor(e){let{baseUrl:t,authorizationCode:r}=e;this._baseUrl=t,this._authorization=r}returnJson(){return fetch(this._baseUrl,{headers:{authorization:this._authorization}}).then((e=>e.json()))}updateUserData(e,t){return fetch(this._baseUrl,{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})}postCard(e,t){return fetch(this._baseUrl,{method:"POST",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})}deleteCard(e){return fetch("https://around.nomoreparties.co/v1/group-12/cards/".concat(e),{method:"DELETE",headers:{authorization:this._authorization}})}likeCard(e,t){return fetch("https://around.nomoreparties.co/v1/group-12/cards/likes/".concat(t),{method:e,headers:{authorization:this._authorization}})}}var t=r(937);r(874);const n={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"};class o{constructor(e,t,r){let{handleCardClick:n,updateApiOnLike:o}=r;this._name=e.name,this._link=e.link,this._likes=e.likes,this._cardSelector=t,this._handleCardClick=n,this._updateApiOnLike=o}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._handleCardClickListener(),this._handleCardLikeButton()}_handleCardClickListener(){this._element.querySelector(".card__image").addEventListener("click",(e=>{this._handleCardClick(e)}))}_handleCardLikeButton(){this._element.querySelector(".card__like-button").addEventListener("click",(function(e){e.target.classList.toggle("card__like-button_active"),this._updateApiOnLike()}))}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._element.querySelector(".card__location").textContent=this._name,this._likesCounte=this._element.querySelector(".card__likeCounte"),this._likesCounte.textContent=this._likes.length,this._element}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class i extends o{constructor(e,t,r){let{handleCardClick:n,updateApiOnLike:o,handleDeleteButtonClick:i,tt:a}=r;super(e,t,{handleCardClick:n,updateApiOnLike:o}),s(this,"_handelDelete",(()=>{this._tt(),this._element.remove(),this._element=null})),s(this,"_setEventListeners",(()=>{super._setEventListeners(),this._handleDeleteButton(),this.x()})),this._handleDeleteButtonClick=i,this._tt=a}x(){this._element.querySelector(".popup__button").addEventListener("click",this._handelDelete)}_handleDeleteButton(){this._element.querySelector(".card__remove-button").addEventListener("click",(e=>{this._handleDeleteButtonClick(e),console.log(e)}))}}class a{constructor(e,t){var r,n;n=()=>{this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState(this._inputList,this._buttonElement)},(r="resetValidation")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,this._formSelector=e,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}_showInputError(e,t){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this._inputErrorClass),this._errorElement.textContent=t,this._errorElement.classList.add(this._errorClass)}_hideInputError(e){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList,this._buttonElement)}))}))}enableValidation(){this._formElement=document.querySelector(this._formSelector),this._setEventListeners()}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u{constructor(e){l(this,"_handleEscClose",(e=>{"Escape"===e.key&&this._popup.classList.add("popup-hidden")})),l(this,"_handleMouseDown",(e=>{const t=this._popup.querySelector(".popup__close-button");(e.target===t||e.target.classList.contains("popup"))&&this.close()})),this._popup=e}open(){this._popup.classList.remove("popup-hidden"),this.setEventListeners()}close(){this._popup.classList.add("popup-hidden"),this.removeEventListeners()}setEventListeners(){window.addEventListener("keydown",this._handleEscClose),this._popup.addEventListener("mousedown",this._handleMouseDown)}removeEventListeners(){window.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("mousedown",this._handleMouseDown)}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends u{constructor(e,t,r){let{handleFormSubmit:n}=r;super(e),c(this,"close",(()=>{super.close(),this._form.reset(),this.removeEventListeners()})),c(this,"setEventListeners",(()=>{super.setEventListeners(),this._form.addEventListener("submit",this._handleSubmit)})),c(this,"removeEventListeners",(()=>{super.removeEventListeners(),this._form.removeEventListener("submit",this._handleSubmit)})),c(this,"_handleSubmit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),this._form=document.querySelector(t),this._handleFormSubmit=n}_getInputValues(){const e=[...this._popup.querySelectorAll(".popup__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}}const h=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__add-button"),_=document.querySelector(".profile__name"),m=document.querySelector(".profile__about-me"),b=(document.querySelector(".profile__image"),document.querySelector(".profile-popup")),f=(b.querySelector(".profile-popup__close-button"),document.querySelector(".card-popup")),v=(f.querySelector(".card-popup__close-button"),document.querySelector(".profile-form")),E=v.querySelector(".profile-form__name"),C=v.querySelector(".profile-form__about-me"),S=(v.querySelector(".profile-form__submit-button"),document.querySelector(".card-form")),g=S.querySelector(".card-form__place"),y=S.querySelector(".card-form__url"),L=document.querySelector(".cards"),k=document.querySelector(".image-popup"),q=(k.querySelector(".image-popup__close-button"),k.querySelector(".image-popup__image")),w=k.querySelector(".image-popup__location"),I={name:_.textContent,about:m.textContent},x=new e({baseUrl:"https://around.nomoreparties.co/v1/group-12/cards",authorizationCode:"37c0271e-6c35-4cdb-bfdd-3d6b737f9411"}),B=new e({baseUrl:"https://around.nomoreparties.co/v1/group-12/users/me",authorizationCode:"37c0271e-6c35-4cdb-bfdd-3d6b737f9411"}),U=new e({baseUrl:"https://around.nomoreparties.co/v1/group-12/users/me",authorizationCode:"37c0271e-6c35-4cdb-bfdd-3d6b737f9411"}),z=new e({baseUrl:"https://around.nomoreparties.co/v1/group-12/cards",authorizationCode:"37c0271e-6c35-4cdb-bfdd-3d6b737f9411"}),D=new e("","37c0271e-6c35-4cdb-bfdd-3d6b737f9411");function O(){B.returnJson().then((e=>{var t,r;t=e.name,r=e.about,_.textContent=t,m.textContent=r}))}const j=new class{constructor(e){let{data:t}=e;this._nameElement=t.name,this._aboutMeElement=t.about}getUserInfo(){const e={};return e.name=this._nameElement,e.about=this._aboutMeElement,e}setUserInfo(e,t){this._nameElement=e,this._aboutMeElement=t}}({data:I});B.returnJson().then((e=>{j.setUserInfo(e.name,e.about)}));const P=new class extends u{constructor(e,t,r){var n,o;super(e),o=e=>{let{src:t,alt:r}=e;super.open(),this._popupImage.src=t,this._popupImage.alt=r,this._popupLocation.textContent=r},(n="open")in this?Object.defineProperty(this,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):this.open=o,this._popupImage=t,this._popupLocation=r}}(k,q,w),V=new a(".profile-form",n),A=new a(".card-form",n),T=new d(b,".profile-form",{handleFormSubmit:()=>{j.setUserInfo(E.value,C.value),U.updateUserData(j.getUserInfo().name,j.getUserInfo().about).then((()=>{O()})),T.close()}}),M=new class{constructor(e,t){let{data:r,renderer:n}=e;this._data=r,this._container=t,this._renderer=n}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:function(t){!function(){if("3dcd812fefd0b46115095582"===t.owner._id){const r=new i(t,"#card-template",{handleCardClick:e=>{P.open({src:e.target.src,alt:e.target.alt})},tt:()=>{new e("","37c0271e-6c35-4cdb-bfdd-3d6b737f9411").deleteCard(t._id).then((()=>{console.log(t._id)}))},handleDeleteButtonClick:()=>{new u(document.querySelector(".deleteCardPopup")).open()},updateApiOnLike:()=>{const e=document.querySelector(".card__like-button");evt.target.classList.contains("card__like-button_active")?D.likeCard("PUT",t._id).then((()=>{e.textContent=t.like.length})).then((()=>{console.log(t)})):D.likeCard("DELETE",t._id).then((()=>{e.textContent=t.like.length})).then((()=>{console.log(t)}))}}).generateCard();M.addItem(r)}else{const e=new o(t,"#initial-cards-template",{handleCardClick:e=>{P.open({src:e.target.src,alt:e.target.alt})}}).generateCard();M.addItem(e)}}()}},L);x.returnJson().then((e=>{M.renderItems(e)}));const J=new d(f,".card-form",{handleFormSubmit:()=>{z.postCard(g.value,y.value).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>(console.log(e),e))).then((e=>{M.renderItems([e])})).then((()=>{J.close()}))}});O(),h.addEventListener("click",(function(){!function(){const e=j.getUserInfo();E.value=e.name,C.value=e.about}(),V.resetValidation(),T.open()})),p.addEventListener("click",(function(){A.resetValidation(),J.open()})),V.enableValidation(),A.enableValidation(),document.getElementById("logo").src=t}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNFLE1BQU0wSSxFQUFXbkMsRUFBU0csY0FDMUJuQixFQUFVUixNQUFRMkQsRUFBU2pMLEtBQzNCK0gsRUFBV1QsTUFBUTJELEVBQVNoTCxNQUk1QmlMLEdBQ0EzQixFQUFxQjRCLGtCQUNyQjFCLEVBQWtCckQsVUFZcEJvQixFQUFvQmpGLGlCQUFpQixTQVRyQyxXQUNFaUgsRUFBa0IyQixrQkFDbEJSLEVBQWV2RSxVQVNqQm1ELEVBQXFCM0QsbUJBRXJCNEQsRUFBa0I1RCxtQkFFQTdELFNBQVNxSixlQUFlLFFBQ2hDdEksSUFBTXVJLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9mb3JtVmFsaWRhdGlvbk9iamVjdC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL3VzZXJDYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybSAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGF1dGhvcml6YXRpb25Db2RlIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5fYXV0aG9yaXphdGlvbiA9IGF1dGhvcml6YXRpb25Db2RlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuSnNvbigpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsLCB7XHJcbiAgICAgIGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbiB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VyRGF0YShuYW1lLCBhYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwb3N0Q2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXHJcbiAgICAgIGBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL2NhcmRzLyR7Y2FyZElkfWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQobWV0aG9kLCBjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChcclxuICAgICAgYGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCxcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogbWV0aG9kLFxyXG4gICAgICAgIGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbiB9LFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgZm9ybVZhbGlkYXRpb25PYmplY3QgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbn07XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgeyBoYW5kbGVDYXJkQ2xpY2ssIHVwZGF0ZUFwaU9uTGlrZSB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX3VwZGF0ZUFwaU9uTGlrZSA9IHVwZGF0ZUFwaU9uTGlrZTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2tMaXN0ZW5lcigpO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlQnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ2FyZENsaWNrTGlzdGVuZXIoKSB7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKGV2dCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVDYXJkTGlrZUJ1dHRvbigpIHtcclxuICAgIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICB0aGlzLl91cGRhdGVBcGlPbkxpa2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuXHJcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIGltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19sb2NhdGlvblwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fbGlrZXNDb3VudGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZUNvdW50ZVwiKTtcclxuICAgIHRoaXMuX2xpa2VzQ291bnRlLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQ2FyZCB9O1xyXG4iLCJpbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4vQ2FyZFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckNhcmQgZXh0ZW5kcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICB7IGhhbmRsZUNhcmRDbGljaywgdXBkYXRlQXBpT25MaWtlLCBoYW5kbGVEZWxldGVCdXR0b25DbGljaywgdHQgfVxyXG4gICkge1xyXG4gICAgc3VwZXIoZGF0YSwgY2FyZFNlbGVjdG9yLCB7IGhhbmRsZUNhcmRDbGljaywgdXBkYXRlQXBpT25MaWtlIH0pO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2sgPSBoYW5kbGVEZWxldGVCdXR0b25DbGljaztcclxuICAgIHRoaXMuX3R0ID0gdHQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGVsRGVsZXRlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fdHQoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9O1xyXG5cclxuICB4KCkge1xyXG4gICAgY29uc3QgZGVsZXRlQ2FyZEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpO1xyXG4gICAgZGVsZXRlQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGVsRGVsZXRlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpO1xyXG4gICAgdGhpcy54KCk7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcclxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19yZW1vdmUtYnV0dG9uXCIpO1xyXG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrKGV2dCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGV2dCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybVNlbGVjdG9yLCB2YWxpZGF0aW9uT2JqZWN0KSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvbk9iamVjdC5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uT2JqZWN0LnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25PYmplY3QuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25PYmplY3QuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25PYmplY3QuZXJyb3JDbGFzcztcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgeyBGb3JtVmFsaWRhdG9yIH07XHJcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cFNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cC1oaWRkZW5cIik7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cC1oaWRkZW5cIik7XHJcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU1vdXNlRG93bik7XHJcbiAgfVxyXG5cclxuICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU1vdXNlRG93bik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXAtaGlkZGVuXCIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVNb3VzZURvd24gPSAoZXZ0KSA9PiB7XHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcclxuICAgIGlmIChldnQudGFyZ2V0ID09PSBjbG9zZUJ1dHRvbiB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgZm9ybSwgeyBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybSk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IFsuLi50aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKV07XHJcblxyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG5cclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UgPSAoKSA9PiB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gIH07XHJcblxyXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgc3VwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVTdWJtaXQgPSAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgfTtcclxufVxyXG4iLCJjb25zdCBwcm9maWxlUG9wdXBPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgY2FyZFBvcHVwT3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Fib3V0LW1lXCIpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLXBvcHVwXCIpO1xyXG5jb25zdCBwcm9maWxlUG9wdXBDbG9zZUJ1dHRvbiA9IHByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGUtcG9wdXBfX2Nsb3NlLWJ1dHRvblwiXHJcbik7XHJcblxyXG5jb25zdCBjYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtcG9wdXBcIik7XHJcbmNvbnN0IGNhcmRQb3B1cENsb3NlQnV0dG9uID0gY2FyZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuY2FyZC1wb3B1cF9fY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLWZvcm1cIik7XHJcbmNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZS1mb3JtX19uYW1lXCIpO1xyXG5jb25zdCBhYm91dElucHV0ID0gcHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLWZvcm1fX2Fib3V0LW1lXCIpO1xyXG5jb25zdCBzdWJtaXRQcm9maWxlQnV0dG9uID0gcHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlLWZvcm1fX3N1Ym1pdC1idXR0b25cIlxyXG4pO1xyXG5cclxuY29uc3QgY2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtZm9ybVwiKTtcclxuY29uc3QgcGFsY2VJbnB1dCA9IGNhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZC1mb3JtX19wbGFjZVwiKTtcclxuY29uc3QgdXJsSW5wdXQgPSBjYXJkRm9ybS5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtZm9ybV9fdXJsXCIpO1xyXG5cclxuY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpO1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtcG9wdXBcIik7XHJcbmNvbnN0IGltYWdlUG9wdXBDbG9zZUJ1dHRvbiA9IGltYWdlUG9wdXAucXVlcnlTZWxlY3RvcihcclxuICBcIi5pbWFnZS1wb3B1cF9fY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuY29uc3QgaW1hZ2VQb3B1cEltYWdlID0gaW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLXBvcHVwX19pbWFnZVwiKTtcclxuY29uc3QgaW1hZ2VQb3B1cExvY2F0aW9uID0gaW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLXBvcHVwX19sb2NhdGlvblwiKTtcclxuY29uc3QgdXNlckluZm9PYmplY3QgPSB7XHJcbiAgbmFtZTogcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgYWJvdXQ6IHByb2ZpbGVBYm91dC50ZXh0Q29udGVudCxcclxufTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgcHJvZmlsZVBvcHVwT3BlbkJ1dHRvbixcclxuICBjYXJkUG9wdXBPcGVuQnV0dG9uLFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVBYm91dCxcclxuICBwcm9maWxlSW1hZ2UsXHJcbiAgcHJvZmlsZVBvcHVwLFxyXG4gIHByb2ZpbGVQb3B1cENsb3NlQnV0dG9uLFxyXG4gIGNhcmRQb3B1cCxcclxuICBjYXJkUG9wdXBDbG9zZUJ1dHRvbixcclxuICBwcm9maWxlRm9ybSxcclxuICBuYW1lSW5wdXQsXHJcbiAgYWJvdXRJbnB1dCxcclxuICBzdWJtaXRQcm9maWxlQnV0dG9uLFxyXG4gIGNhcmRGb3JtLFxyXG4gIHBhbGNlSW5wdXQsXHJcbiAgdXJsSW5wdXQsXHJcbiAgY2FyZHNDb250YWluZXIsXHJcbiAgaW1hZ2VQb3B1cCxcclxuICBpbWFnZVBvcHVwQ2xvc2VCdXR0b24sXHJcbiAgaW1hZ2VQb3B1cEltYWdlLFxyXG4gIGltYWdlUG9wdXBMb2NhdGlvbixcclxuICB1c2VySW5mb09iamVjdCxcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgbG9nb1NyYyBmcm9tIFwiLi4vaW1hZ2VzL2xvZ28uc3ZnXCI7XHJcbmltcG9ydCBwcm9maWxlU3JjIGZyb20gXCIuLi9pbWFnZXMvZnJvZmlsZS1pbWFnZS5qcGdcIjtcclxuaW1wb3J0IHsgZm9ybVZhbGlkYXRpb25PYmplY3QgfSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy9mb3JtVmFsaWRhdGlvbk9iamVjdC5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBVc2VyQ2FyZCBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL3VzZXJDYXJkXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybSBcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IERlbGV0ZUNhcmRQb3B1cCBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL2RlbGV0ZUNhcmRQb3B1cFwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5pbXBvcnQge1xyXG4gIHByb2ZpbGVQb3B1cE9wZW5CdXR0b24sXHJcbiAgY2FyZFBvcHVwT3BlbkJ1dHRvbixcclxuICBwcm9maWxlUG9wdXAsXHJcbiAgY2FyZFBvcHVwLFxyXG4gIG5hbWVJbnB1dCxcclxuICBhYm91dElucHV0LFxyXG4gIGNhcmRzQ29udGFpbmVyLFxyXG4gIGltYWdlUG9wdXAsXHJcbiAgdXNlckluZm9PYmplY3QsXHJcbiAgaW1hZ2VQb3B1cEltYWdlLFxyXG4gIGltYWdlUG9wdXBMb2NhdGlvbixcclxuICBwYWxjZUlucHV0LFxyXG4gIHVybElucHV0LFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVBYm91dCxcclxufSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHNcIjtcclxuaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwXCI7XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZGRBcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHNcIixcclxuICBhdXRob3JpemF0aW9uQ29kZTogXCIzN2MwMjcxZS02YzM1LTRjZGItYmZkZC0zZDZiNzM3Zjk0MTFcIixcclxufSk7XHJcblxyXG5jb25zdCBnZXRVc2VySW5mb0FwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi91c2Vycy9tZVwiLFxyXG4gIGF1dGhvcml6YXRpb25Db2RlOiBcIjM3YzAyNzFlLTZjMzUtNGNkYi1iZmRkLTNkNmI3MzdmOTQxMVwiLFxyXG59KTtcclxuXHJcbmNvbnN0IHVwZGF0ZVVzZXJJbmZvQXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyL3VzZXJzL21lXCIsXHJcbiAgYXV0aG9yaXphdGlvbkNvZGU6IFwiMzdjMDI3MWUtNmMzNS00Y2RiLWJmZGQtM2Q2YjczN2Y5NDExXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgcG9zdENhcmRBcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTIvY2FyZHNcIixcclxuICBhdXRob3JpemF0aW9uQ29kZTogXCIzN2MwMjcxZS02YzM1LTRjZGItYmZkZC0zZDZiNzM3Zjk0MTFcIixcclxufSk7XHJcblxyXG5jb25zdCBsaWtlQ2FyZEFwaSA9IG5ldyBBcGkoXCJcIiwgXCIzN2MwMjcxZS02YzM1LTRjZGItYmZkZC0zZDZiNzM3Zjk0MTFcIik7XHJcblxyXG5mdW5jdGlvbiBzZXRQcm9maWxlSW5mbyhuYW1lLCBhYm91dCkge1xyXG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICBwcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGVsVXNlckluZm8oKSB7XHJcbiAgZ2V0VXNlckluZm9BcGkucmV0dXJuSnNvbigpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgc2V0UHJvZmlsZUluZm8ocmVzLm5hbWUsIHJlcy5hYm91dCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgZGF0YTogdXNlckluZm9PYmplY3QgfSk7XHJcblxyXG5nZXRVc2VySW5mb0FwaS5yZXR1cm5Kc29uKCkudGhlbigocmVzKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzLm5hbWUsIHJlcy5hYm91dCk7XHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcclxuICBpbWFnZVBvcHVwLFxyXG4gIGltYWdlUG9wdXBJbWFnZSxcclxuICBpbWFnZVBvcHVwTG9jYXRpb25cclxuKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgXCIucHJvZmlsZS1mb3JtXCIsXHJcbiAgZm9ybVZhbGlkYXRpb25PYmplY3RcclxuKTtcclxuXHJcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXCIuY2FyZC1mb3JtXCIsIGZvcm1WYWxpZGF0aW9uT2JqZWN0KTtcclxuXHJcbmNvbnN0IHByb2ZpbGVQb3B1cENsYXNzID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvZmlsZVBvcHVwLCBcIi5wcm9maWxlLWZvcm1cIiwge1xyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5hbWVJbnB1dC52YWx1ZSwgYWJvdXRJbnB1dC52YWx1ZSk7XHJcbiAgICB1cGRhdGVVc2VySW5mb0FwaVxyXG4gICAgICAudXBkYXRlVXNlckRhdGEodXNlckluZm8uZ2V0VXNlckluZm8oKS5uYW1lLCB1c2VySW5mby5nZXRVc2VySW5mbygpLmFib3V0KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgaGFuZGVsVXNlckluZm8oKTtcclxuICAgICAgfSk7XHJcbiAgICBwcm9maWxlUG9wdXBDbGFzcy5jbG9zZSgpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtKSB7XHJcbiAgZnVuY3Rpb24gaXNVc2VyQ2FyZCgpIHtcclxuICAgIGlmIChpdGVtLm93bmVyLl9pZCA9PT0gXCIzZGNkODEyZmVmZDBiNDYxMTUwOTU1ODJcIikge1xyXG4gICAgICBjb25zdCBjYXJkID0gbmV3IFVzZXJDYXJkKGl0ZW0sIFwiI2NhcmQtdGVtcGxhdGVcIiwge1xyXG4gICAgICAgIGhhbmRsZUNhcmRDbGljazogKGV2dCkgPT4ge1xyXG4gICAgICAgICAgcG9wdXBJbWFnZS5vcGVuKHsgc3JjOiBldnQudGFyZ2V0LnNyYywgYWx0OiBldnQudGFyZ2V0LmFsdCB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHR0OiAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBkZWxldGVDYXJkQXBpID0gbmV3IEFwaShcclxuICAgICAgICAgICAgXCJcIixcclxuICAgICAgICAgICAgXCIzN2MwMjcxZS02YzM1LTRjZGItYmZkZC0zZDZiNzM3Zjk0MTFcIlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGRlbGV0ZUNhcmRBcGkuZGVsZXRlQ2FyZChpdGVtLl9pZCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0uX2lkKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cChcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZWxldGVDYXJkUG9wdXBcIilcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBkZWxldGVDYXJkUG9wdXAub3BlbigpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdXBkYXRlQXBpT25MaWtlOiAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBsaWtlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICBsaWtlQ2FyZEFwaVxyXG4gICAgICAgICAgICAgIC5saWtlQ2FyZChcIlBVVFwiLCBpdGVtLl9pZClcclxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsaWtlQnV0dG9uLnRleHRDb250ZW50ID0gaXRlbS5saWtlLmxlbmd0aDtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGlrZUNhcmRBcGlcclxuICAgICAgICAgICAgICAubGlrZUNhcmQoXCJERUxFVEVcIiwgaXRlbS5faWQpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGlrZUJ1dHRvbi50ZXh0Q29udGVudCA9IGl0ZW0ubGlrZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCBcIiNpbml0aWFsLWNhcmRzLXRlbXBsYXRlXCIsIHtcclxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6IChldnQpID0+IHtcclxuICAgICAgICAgIHBvcHVwSW1hZ2Uub3Blbih7IHNyYzogZXZ0LnRhcmdldC5zcmMsIGFsdDogZXZ0LnRhcmdldC5hbHQgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlzVXNlckNhcmQoKTtcclxufVxyXG5cclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIGNhcmRzQ29udGFpbmVyXHJcbik7XHJcblxyXG5pbml0aWFsQ2FyZGRBcGkucmV0dXJuSnNvbigpLnRoZW4oKHJlcykgPT4ge1xyXG4gIGNhcmRMaXN0LnJlbmRlckl0ZW1zKHJlcyk7XHJcbn0pO1xyXG5cclxuY29uc3QgY2FyZFBvcHVwQ2xhc3MgPSBuZXcgUG9wdXBXaXRoRm9ybShjYXJkUG9wdXAsIFwiLmNhcmQtZm9ybVwiLCB7XHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xyXG4gICAgcG9zdENhcmRBcGlcclxuICAgICAgLnBvc3RDYXJkKHBhbGNlSW5wdXQudmFsdWUsIHVybElucHV0LnZhbHVlKVxyXG4gICAgICAudGhlbigoY2FyZCkgPT4ge1xyXG4gICAgICAgIGlmIChjYXJkLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gY2FyZC5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7Y2FyZC5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChjYXJkKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coY2FyZCk7XHJcbiAgICAgICAgcmV0dXJuIGNhcmQ7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChjYXJkKSA9PiB7XHJcbiAgICAgICAgY2FyZExpc3QucmVuZGVySXRlbXMoW2NhcmRdKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNhcmRQb3B1cENsYXNzLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKCkge1xyXG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xyXG4gIGFib3V0SW5wdXQudmFsdWUgPSB1c2VyRGF0YS5hYm91dDtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlblByb2ZpbGVGb3JtKCkge1xyXG4gIGZpbGxQcm9maWxlRm9ybSgpO1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHByb2ZpbGVQb3B1cENsYXNzLm9wZW4oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlbkNhcmRQb3B1cCgpIHtcclxuICBjYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBjYXJkUG9wdXBDbGFzcy5vcGVuKCk7XHJcbn1cclxuXHJcbmhhbmRlbFVzZXJJbmZvKCk7XHJcblxyXG5wcm9maWxlUG9wdXBPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUHJvZmlsZUZvcm0pO1xyXG5cclxuY2FyZFBvcHVwT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkNhcmRQb3B1cCk7XHJcblxyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBsb2dvSW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvZ29cIik7XHJcbmxvZ29JbWFnZS5zcmMgPSBsb2dvU3JjO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fYWJvdXRNZUVsZW1lbnQgPSBkYXRhLmFib3V0O1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHt9O1xyXG5cclxuICAgIHVzZXJJbmZvLm5hbWUgPSB0aGlzLl9uYW1lRWxlbWVudDtcclxuICAgIHVzZXJJbmZvLmFib3V0ID0gdGhpcy5fYWJvdXRNZUVsZW1lbnQ7XHJcblxyXG4gICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Fib3V0TWVFbGVtZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHBvcHVwSW1hZ2UsIHBvcHVwTG9jYXRpb24pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHBvcHVwSW1hZ2U7XHJcbiAgICB0aGlzLl9wb3B1cExvY2F0aW9uID0gcG9wdXBMb2NhdGlvbjtcclxuICB9XHJcbiAgb3BlbiA9ICh7IHNyYywgYWx0IH0pID0+IHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gc3JjO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBhbHQ7XHJcbiAgICB0aGlzLl9wb3B1cExvY2F0aW9uLnRleHRDb250ZW50ID0gYWx0O1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhkYXRhKSB7XHJcbiAgICBkYXRhLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInAiLCJBcGkiLCJjb25zdHJ1Y3RvciIsImJhc2VVcmwiLCJhdXRob3JpemF0aW9uQ29kZSIsInRoaXMiLCJfYmFzZVVybCIsIl9hdXRob3JpemF0aW9uIiwicmV0dXJuSnNvbiIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwicmVzIiwianNvbiIsInVwZGF0ZVVzZXJEYXRhIiwibmFtZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwb3N0Q2FyZCIsImxpbmsiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwibGlrZUNhcmQiLCJmb3JtVmFsaWRhdGlvbk9iamVjdCIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ1cGRhdGVBcGlPbkxpa2UiLCJfbmFtZSIsIl9saW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl91cGRhdGVBcGlPbkxpa2UiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUNhcmRDbGlja0xpc3RlbmVyIiwiX2hhbmRsZUNhcmRMaWtlQnV0dG9uIiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2VuZXJhdGVDYXJkIiwiaW1hZ2VFbGVtZW50Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfbGlrZXNDb3VudGUiLCJsZW5ndGgiLCJVc2VyQ2FyZCIsImhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIiwidHQiLCJzdXBlciIsIl90dCIsInJlbW92ZSIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJ4IiwiX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIiwiX2hhbmRlbERlbGV0ZSIsImNvbnNvbGUiLCJsb2ciLCJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvbk9iamVjdCIsIl9pbnB1dExpc3QiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2J1dHRvbkVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsIl9lcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsImFkZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsImRpc2FibGVkIiwicXVlcnlTZWxlY3RvckFsbCIsImVuYWJsZVZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJfcG9wdXAiLCJjbG9zZUJ1dHRvbiIsImNvbnRhaW5zIiwiY2xvc2UiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsIndpbmRvdyIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVNb3VzZURvd24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJyZXNldCIsIl9oYW5kbGVTdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcm9maWxlUG9wdXBPcGVuQnV0dG9uIiwiY2FyZFBvcHVwT3BlbkJ1dHRvbiIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0IiwicHJvZmlsZVBvcHVwIiwiY2FyZFBvcHVwIiwicHJvZmlsZUZvcm0iLCJuYW1lSW5wdXQiLCJhYm91dElucHV0IiwiY2FyZEZvcm0iLCJwYWxjZUlucHV0IiwidXJsSW5wdXQiLCJjYXJkc0NvbnRhaW5lciIsImltYWdlUG9wdXAiLCJpbWFnZVBvcHVwSW1hZ2UiLCJpbWFnZVBvcHVwTG9jYXRpb24iLCJ1c2VySW5mb09iamVjdCIsImluaXRpYWxDYXJkZEFwaSIsImdldFVzZXJJbmZvQXBpIiwidXBkYXRlVXNlckluZm9BcGkiLCJwb3N0Q2FyZEFwaSIsImxpa2VDYXJkQXBpIiwiaGFuZGVsVXNlckluZm8iLCJ1c2VySW5mbyIsIl9uYW1lRWxlbWVudCIsIl9hYm91dE1lRWxlbWVudCIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwb3B1cEltYWdlIiwicG9wdXBMb2NhdGlvbiIsIl9wb3B1cEltYWdlIiwiX3BvcHVwTG9jYXRpb24iLCJwcm9maWxlRm9ybVZhbGlkYXRvciIsImNhcmRGb3JtVmFsaWRhdG9yIiwicHJvZmlsZVBvcHVwQ2xhc3MiLCJjYXJkTGlzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfZGF0YSIsIl9jb250YWluZXIiLCJfcmVuZGVyZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJvd25lciIsIl9pZCIsImNhcmRFbGVtZW50IiwibGlrZUJ1dHRvbiIsImxpa2UiLCJpc1VzZXJDYXJkIiwiY2FyZFBvcHVwQ2xhc3MiLCJjYXJkIiwib2siLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwidXNlckRhdGEiLCJmaWxsUHJvZmlsZUZvcm0iLCJyZXNldFZhbGlkYXRpb24iLCJnZXRFbGVtZW50QnlJZCIsImxvZ29TcmMiXSwic291cmNlUm9vdCI6IiJ9